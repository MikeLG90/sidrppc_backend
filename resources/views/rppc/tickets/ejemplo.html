<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mailbox de Tickets</title>
    <style>
      body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 20px;
}

.container {
    max-width: 600px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

input, textarea, button {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

input:focus, textarea:focus {
    border-color: #007bff;
}

.ticket-list {
    margin-bottom: 20px;
}

.ticket {
    background: #e9ecef;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s;
}

.ticket:hover {
    background: #dcdcdc;
}

.ticket-details {
    display: none;
    margin-top: 20px;
}

.ticket-details button {
    margin-bottom: 10px;
}

    </style>
</head>
<body>
    <div class="container">
        <h1>Mailbox de Tickets</h1>
        <input type="text" id="filter" placeholder="Filtrar tickets..." oninput="filterTickets()">
        
        <div class="ticket-list" id="ticket-list">
            <!-- Tickets se añadirán aquí dinámicamente -->
        </div>

        <h2>Agregar Nuevo Ticket</h2>
        <form id="ticket-form">
            <input type="text" id="ticket-title-input" placeholder="Título" required>
            <textarea id="ticket-description-input" placeholder="Descripción" required></textarea>
            <button type="submit">Agregar Ticket</button>
        </form>

        <div class="ticket-details" id="ticket-details">
            <button onclick="closeTicket()">Cerrar</button>
            <h2 id="ticket-title"></h2>
            <p id="ticket-description"></p>
            <p><strong>Estado:</strong> <span id="ticket-status"></span></p>
            <button id="toggle-status" onclick="toggleStatus()">Marcar como Resuelto</button>
        </div>
    </div>
    <script>
      let tickets = [
    {
        id: 1,
        title: "Error en la página principal",
        description: "La página principal no carga correctamente y muestra un error 404.",
        resolved: false,
    },
    {
        id: 2,
        title: "Problemas con la base de datos",
        description: "Se ha detectado un fallo en la conexión con la base de datos en el servidor.",
        resolved: true,
    },
    {
        id: 3,
        title: "Solicitud de cambio de contraseña",
        description: "Un usuario ha solicitado un cambio de contraseña, pero no ha recibido el correo.",
        resolved: false,
    }
];

let ticketCounter = tickets.length + 1;

function renderTickets() {
    const ticketList = document.getElementById('ticket-list');
    ticketList.innerHTML = '';

    tickets.forEach(ticket => {
        const ticketElement = document.createElement('div');
        ticketElement.className = 'ticket';
        ticketElement.onclick = () => openTicket(ticket.id);
        ticketElement.innerHTML = `<h2>${ticket.title}</h2><p>${ticket.resolved ? 'Resuelto' : 'Pendiente'}</p>`;
        ticketList.appendChild(ticketElement);
    });
}

document.getElementById('ticket-form').addEventListener('submit', function(event) {
    event.preventDefault();
    const title = document.getElementById('ticket-title-input').value;
    const description = document.getElementById('ticket-description-input').value;

    const newTicket = {
        id: ticketCounter++,
        title: title,
        description: description,
        resolved: false,
    };

    tickets.push(newTicket);
    renderTickets();
    this.reset();
});

function openTicket(ticketId) {
    const ticket = tickets.find(t => t.id === ticketId);
    if (ticket) {
        document.getElementById('ticket-title').innerText = ticket.title;
        document.getElementById('ticket-description').innerText = ticket.description;
        document.getElementById('ticket-status').innerText = ticket.resolved ? 'Resuelto' : 'Pendiente';
        document.getElementById('toggle-status').innerText = ticket.resolved ? 'Marcar como Pendiente' : 'Marcar como Resuelto';
        document.getElementById('ticket-details').style.display = 'block';
    }
}

function closeTicket() {
    document.getElementById('ticket-details').style.display = 'none';
}

function toggleStatus() {
    const ticketTitle = document.getElementById('ticket-title').innerText;
    const ticket = tickets.find(t => t.title === ticketTitle);
    if (ticket) {
        ticket.resolved = !ticket.resolved;
        renderTickets();
        closeTicket();
    }
}

function filterTickets() {
    const filter = document.getElementById('filter').value.toLowerCase();
    const filteredTickets = tickets.filter(ticket => ticket.title.toLowerCase().includes(filter));
    const ticketList = document.getElementById('ticket-list');
    ticketList.innerHTML = '';

    filteredTickets.forEach(ticket => {
        const ticketElement = document.createElement('div');
        ticketElement.className = 'ticket';
        ticketElement.onclick = () => openTicket(ticket.id);
        ticketElement.innerHTML = `<h2>${ticket.title}</h2><p>${ticket.resolved ? 'Resuelto' : 'Pendiente'}</p>`;
        ticketList.appendChild(ticketElement);
    });
}

// Renderizar tickets iniciales al cargar la página
renderTickets();

    </script>
</body>
</html>
